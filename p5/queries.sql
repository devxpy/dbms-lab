DROP TABLE WORKS_ON;
DROP TABLE PROJECT;
DROP TABLE DLOCATION;
DROP TABLE DEPARTMENT;
DROP TABLE EMPLOYEE;


CREATE TABLE EMPLOYEE (
    SSN NUMBER(9),
    NAME VARCHAR(20),
    ADDRESS VARCHAR(25),
    SEX CHAR,
    SALARY NUMBER(10,2),
    SUPERSSN NUMBER(9),
    DNO NUMBER(2),
    CONSTRAINT PA PRIMARY KEY(SSN)
);

INSERT INTO EMPLOYEE VALUES('123456789', 'ASHA', 'YELAHANKA', 'F', '500000', '234567891', '1');
INSERT INTO EMPLOYEE VALUES('234567891', 'SHEELA', 'JAKPUR', 'F', '700000', '678912345', '2');
INSERT INTO EMPLOYEE VALUES('345678912', 'PALLAVI', 'NEWTOWN', 'F', '700000', '234567891', '3');
INSERT INTO EMPLOYEE VALUES('567891234', 'MOHAN', 'NAGAR', 'M', '350000', '678912345', '5');
INSERT INTO EMPLOYEE VALUES('678912345', '678912345', 'TUMKUR', 'M', '1000000', '678912345', '6');
INSERT INTO EMPLOYEE VALUES('789123456', 'SCOTT', 'NEWYORK', 'F', '350000', '223344556', '2');
INSERT INTO EMPLOYEE VALUES('891234567', 'SAPNA', 'HUNSMARENHALLI', 'F', '350000', '112233445', '2');
INSERT INTO EMPLOYEE VALUES('912345678', 'REVAN', 'VIDYARANYAPURA', 'M', '450000', '123456789', '2');
INSERT INTO EMPLOYEE VALUES('112233445', 'SAVITHA', 'MADIWALA', 'F', '700000', '234567891', '2');
INSERT INTO EMPLOYEE VALUES('223344556', 'VITAY', 'DBSANDRA', 'M', '600000', '345678912', '2');

INSERT INTO EMPLOYEE VALUES('456789123', 'SHREYAS', 'BASAWESWAR', 'M', '7500', '234567891', '4');
INSERT INTO EMPLOYEE VALUES('334455667', 'MANDHAR', 'VISAYPURA', 'M', '5000', '456789123', '4');
INSERT INTO EMPLOYEE VALUES('445566778', 'RAGHAV', 'JAYMAHAL', 'M', '6000', '345678912', '4');

INSERT INTO EMPLOYEE VALUES('44556678', 'RAGHAV', 'JAYMAHAL', 'M', '6000', '345678912', '4');
INSERT INTO EMPLOYEE VALUES('4455778', 'RAGHAV', 'JAYMAHAL', 'M', '6000', '345678912', '4');
INSERT INTO EMPLOYEE VALUES('4466778', 'RAGHAV', 'JAYMAHAL', 'M', '6000', '345678912', '4');

ALTER TABLE 
    EMPLOYEE 
ADD 
    CONSTRAINT PB FOREIGN KEY(SUPERSSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE;

---

CREATE TABLE DEPARTMENT (
    DNO NUMBER(2), 
    DNAME VARCHAR(15),
    MGRSSN NUMBER(9),
    MGRSTARTDATE DATE,
    CONSTRAINT PC PRIMARY KEY(DNO),
    CONSTRAINT PKD FOREIGN KEY(MGRSSN) REFERENCES EMPLOYEE(SSN) ON DELETE CASCADE
);

INSERT INTO DEPARTMENT VALUES('1', 'CSE', '234567891',  '1-JAN-10');
INSERT INTO DEPARTMENT VALUES('2', 'ISE', '345678912', '15-FEB-11');
INSERT INTO DEPARTMENT VALUES('3', 'ECE', '456789123', '1-MAR-12');
INSERT INTO DEPARTMENT VALUES('4', 'ACCOUNTS', '678912345', '15-APR-13');
INSERT INTO DEPARTMENT VALUES('5', 'TCE', '123456789', '2-MAY-14');
INSERT INTO DEPARTMENT VALUES('6', 'ECE', '567891234', '15-JUN-15');

---

 CREATE TABLE DLOCATION (DNO NUMBER(2),
DLOC VARCHAR(15),
CONSTRAINT CPK PRIMARY KEY (DNO,DLOC),
CONSTRAINT FK_D1 FOREIGN KEY (DNO) REFERENCES DEPARTMENT (DNO) ON
DELETE CASCADE);


INSERT INTO DLOCATION VALUES('1', 'NB1');
INSERT INTO DLOCATION VALUES('2', 'NB0');
INSERT INTO DLOCATION VALUES('3', 'NB2');
INSERT INTO DLOCATION VALUES('4', 'NB1');
INSERT INTO DLOCATION VALUES('5', 'NB3');
INSERT INTO DLOCATION VALUES('6', 'EEE2');

---

 CREATE TABLE PROJECT (PNO NUMBER(2), PNAME VARCHAR(15),
PLOCATION VARCHAR(15),
DNO NUMBER(2),
CONSTRAINT PKP PRIMARY KEY(PNO),
CONSTRAINT FKD FOREIGN KEY (DNO) REFERENCES DEPARTMENT (DNO) ON DELETE CASCADE);

INSERT INTO PROJECT VALUES('11', 'JAVA', 'MARATHAHALLI', '1');
INSERT INTO PROJECT VALUES('22', 'DOTNET', 'HEBBAL', '2');
INSERT INTO PROJECT VALUES('33', 'IOT', 'MANYATA', '3');
INSERT INTO PROJECT VALUES('44', 'ANDROID', 'YELAHANKA', '4');
INSERT INTO PROJECT VALUES('55', 'BIGDATA', 'KRPURAM', '5');
INSERT INTO PROJECT VALUES('66', 'WEB', 'ELECTRONICCITY', '6');
---

CREATE TABLE WORKS_ON (SSN NUMBER(9), PNO NUMBER(2),
HOURS NUMBER(3),
CONSTRAINT SP PRIMARY KEY (SSN,PNO),
CONSTRAINT FKS FOREIGN KEY (SSN) REFERENCES EMPLOYEE (SSN) ON DELETE
CASCADE,
CONSTRAINT FKP FOREIGN KEY (PNO) REFERENCES PROJECT (PNO) ON DELETE
CASCADE);

INSERT INTO WORKS_ON VALUES('678912345', '11', '25');
INSERT INTO WORKS_ON VALUES('123456789', '22', '30');
INSERT INTO WORKS_ON VALUES('234567891', '33', '40');
INSERT INTO WORKS_ON VALUES('678912345', '44', '20');
INSERT INTO WORKS_ON VALUES('345678912', '55', '50');
INSERT INTO WORKS_ON VALUES('456789123', '66', '60');
---

SELECT * FROM EMPLOYEE;
SELECT * FROM DEPARTMENT;
SELECT * FROM DLOCATION;
SELECT * FROM PROJECT;
SELECT * FROM WORKS_ON;

COMMIT;
