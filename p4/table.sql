DROP TABLE IAMARKS;
DROP TABLE SUBJECT;
DROP TABLE CLASS;
DROP TABLE SEMSEC;
DROP TABLE STUDENT;

-----

CREATE TABLE STUDENT(
    USN CHAR(10), 
    SNAME VARCHAR(20),
    ADDRESS VARCHAR(25),
    PHONE NUMBER(10),
    GENDER CHAR,
    CONSTRAINT A PRIMARY KEY(USN)
);

INSERT INTO STUDENT VALUES('1MV17CS001', 'AASHISH', 'BANGALORE', '1020304050', 'M');
INSERT INTO STUDENT VALUES('1MV17CS060', 'NAELA', 'MYSORE', '1122334455', 'F');
INSERT INTO STUDENT VALUES('1MV17CS130', 'MILIND', 'JAMMU', '5060708090', 'M');
INSERT INTO STUDENT VALUES('1MV16CS001', 'ABHIJITH', 'PUNE', '9988776655', 'M');
INSERT INTO STUDENT VALUES('1MV16CS060', 'NIKITHA', 'HYDERABAD', '9080706050', 'F');
INSERT INTO STUDENT VALUES('1MV16CS130', 'SANJANA', 'GUWAHATTI', '1234567890', 'F');
INSERT INTO STUDENT VALUES('1MV15CS001', 'ANSHUMAN', 'PANAJI', '1112223334', 'M');
INSERT INTO STUDENT VALUES('1MV15CS060', 'AMRUTHA', 'BANGALORE', '1002003004', 'F');
INSERT INTO STUDENT VALUES('1MV15CS130', 'BHUVANESH', 'JAIPUR', '9008007006', 'M');
INSERT INTO STUDENT VALUES('1MV14CS001', 'DEVAYANI', 'BANGALORE', '10020030', 'F');
INSERT INTO STUDENT VALUES('1MV14CS060', 'DAVID', 'KOCHI', '90080070', 'M');
INSERT INTO STUDENT VALUES('1MV14CS130', 'AISHWARYA', 'MUMBAI', '1000020000', 'F');

-----

CREATE TABLE SEMSEC(
    SSID CHAR(2), 
    SEM NUMBER(1),
    SEC CHAR,
    CONSTRAINT B PRIMARY KEY(SSID), 
    CONSTRAINT C CHECK(SEM BETWEEN 1 AND 8)
);

INSERT INTO SEMSEC VALUES('2A', '2', 'A');
INSERT INTO SEMSEC VALUES('2B', '2', 'B');
INSERT INTO SEMSEC VALUES('2C', '2', 'C');
INSERT INTO SEMSEC VALUES('4A', '4', 'A');
INSERT INTO SEMSEC VALUES('4B', '4', 'B');
INSERT INTO SEMSEC VALUES('4C', '4', 'C');
INSERT INTO SEMSEC VALUES('6A', '6', 'A');
INSERT INTO SEMSEC VALUES('6B', '6', 'B');
INSERT INTO SEMSEC VALUES('6C', '6', 'C');
INSERT INTO SEMSEC VALUES('8A', '8', 'A');
INSERT INTO SEMSEC VALUES('8B', '8', 'B');
INSERT INTO SEMSEC VALUES('8C', '8', 'C');

#########


CREATE TABLE CLASS(
    USN CHAR(10),
    SSID CHAR(2),
    CONSTRAINT D PRIMARY KEY(USN,SSID),
    CONSTRAINT E FOREIGN KEY(USN) REFERENCES STUDENT(USN) ON DELETE CASCADE,
    CONSTRAINT F FOREIGN KEY(SSID) REFERENCES SEMSEC(SSID) ON DELETE CASCADE 
);

INSERT INTO CLASS VALUES('1MV14CS001', '8A');
INSERT INTO CLASS VALUES('1MV14CS060', '8B');
INSERT INTO CLASS VALUES('1MV14CS130', '8C');
INSERT INTO CLASS VALUES('1MV15CS001', '6A');
INSERT INTO CLASS VALUES('1MV15CS060', '6B');
INSERT INTO CLASS VALUES('1MV15CS130', '6C');
INSERT INTO CLASS VALUES('1MV16CS001', '4A');
INSERT INTO CLASS VALUES('1MV16CS060', '4B');
INSERT INTO CLASS VALUES('1MV16CS130', '4C');
INSERT INTO CLASS VALUES('1MV17CS001', '2A');
INSERT INTO CLASS VALUES('1MV17CS060', '2B');
INSERT INTO CLASS VALUES('1MV17CS130', '2C');

-----

CREATE TABLE SUBJECT(
    SUBCODE VARCHAR(7), 
    TITLE VARCHAR(20),
    SEM NUMBER(1), 
    CREDITS NUMBER(1),
    CONSTRAINT G PRIMARY KEY(SUBCODE) 
);


INSERT INTO SUBJECT VALUES('15CS21', 'M2', '2', '4');
INSERT INTO SUBJECT VALUES('15PCD23', 'PCD', '2', '4');
INSERT INTO SUBJECT VALUES('15CS42', 'SE', '4', '4');
INSERT INTO SUBJECT VALUES('15CS44', 'MP', '4', '4');
INSERT INTO SUBJECT VALUES('15CS64', 'CG', '6', '4');
INSERT INTO SUBJECT VALUES('15CS62', 'USP', '6', '4');
INSERT INTO SUBJECT VALUES('10CS81', 'SA', '8', '4');
INSERT INTO SUBJECT VALUES('10CS842', 'ST', '8', '3');

-----

CREATE TABLE IAMARKS(
    USN CHAR(10),
    SUBCODE VARCHAR(7),
    SSID CHAR(2),
    TEST1 NUMBER(2),
    TEST2 NUMBER(2), 
    TEST3 NUMBER(2), 
    FINALIA NUMBER(2),
    CONSTRAINT H PRIMARY KEY(USN,SUBCODE,SSID),
    CONSTRAINT I FOREIGN KEY(USN) REFERENCES STUDENT(USN) ON DELETE CASCADE, 
    CONSTRAINT J FOREIGN KEY(SSID) REFERENCES SEMSEC(SSID) ON DELETE CASCADE,
    CONSTRAINT K FOREIGN KEY(SUBCODE) REFERENCES SUBJECT(SUBCODE) ON DELETE CASCADE
);

INSERT INTO IAMARKS VALUES('1MV17CS001', '15PCD23', '2B', 15, 14, 13, '');
INSERT INTO IAMARKS VALUES('1MV17CS060', '15PCD23', '2B', 15, 15, 14, '');
INSERT INTO IAMARKS VALUES('1MV17CS130', '15CS21', '2C', 11, 12, 13, '');
INSERT INTO IAMARKS VALUES('1MV16CS001', '15CS42', '4A', 19, 19, 18, '');
INSERT INTO IAMARKS VALUES('1MV16CS060', '15CS44', '4B', 5, 8, 5, '');
INSERT INTO IAMARKS VALUES('1MV16CS130', '15CS42', '4C', 20, 20, 20, '');
INSERT INTO IAMARKS VALUES('1MV15CS001', '15CS64', '6A', 12, 12, 12, '');
INSERT INTO IAMARKS VALUES('1MV15CS060', '15CS62', '6B', 18, 19, 20, '');
INSERT INTO IAMARKS VALUES('1MV15CS130', '15CS64', '6C', 8, 12, 11, '');
INSERT INTO IAMARKS VALUES('1MV14CS001', '10CS81', '8A', 19, 18, 17, '');
INSERT INTO IAMARKS VALUES('1MV14CS060', '10CS842', '8B', 11, 0, 14, '');
INSERT INTO IAMARKS VALUES('1MV14CS130', '10CS81', '8C', 10, 0, 7, '');

-----

SELECT * FROM STUDENT;
SELECT * FROM SEMSEC;
SELECT * FROM CLASS;
SELECT * FROM SUBJECT;
SELECT * FROM IAMARKS;

COMMIT;
