DROP TABLE BOOK_LENDING;
DROP TABLE BOOK_COPIES;
DROP TABLE BOOK_AUTHORS;
DROP TABLE BOOK;
DROP TABLE LIBRARY_BRANCH;
DROP TABLE PUBLISHER;

CREATE TABLE PUBLISHER(NAME VARCHAR(15), ADDRESS VARCHAR(25),
PHONE NUMBER(10),
CONSTRAINT PK_PN PRIMARY KEY(NAME) );

CREATE TABLE LIBRARY_BRANCH(BRANCH_ID NUMBER(5), BRANCH_NAME VARCHAR(25),
ADDRESS VARCHAR(25),
CONSTRAINT PK_ID PRIMARY KEY(BRANCH_ID) );

CREATE TABLE BOOK(BOOK_ID NUMBER(5), TITLE VARCHAR(25),
PUBLISHER_NAME VARCHAR(25),
PUB_YEAR NUMBER(4),
CONSTRAINT PK_BID PRIMARY KEY(BOOK_ID),
CONSTRAINT FK_N FOREIGN KEY (PUBLISHER_NAME) REFERENCES
PUBLISHER (NAME) ON DELETE CASCADE );


CREATE TABLE BOOK_AUTHORS(BOOK_ID NUMBER(5), AUTHOR_NAME VARCHAR(25),
CONSTRAINT FK_B FOREIGN KEY(BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE
);

CREATE TABLE BOOK_COPIES(BOOK_ID NUMBER(5), BRANCH_ID NUMBER(5),
NO_OF_COPIES NUMBER(2),
CONSTRAINT CPK_BBI PRIMARY KEY(BOOK_ID,BRANCH_ID),
CONSTRAINT FK_BI FOREIGN KEY(BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
CONSTRAINT FK_I FOREIGN KEY(BRANCH_ID) REFERENCES LIBRARY_BRANCH(BRANCH_ID) ON DELETE CASCADE
);


CREATE TABLE BOOK_LENDING(BOOK_ID NUMBER(5), BRANCH_ID NUMBER(5),
CARD_NO NUMBER(3),
DATE_OUT DATE,
DUE_DATE DATE,
CONSTRAINT CPK_BBC PRIMARY KEY (BOOK_ID, BRANCH_ID, CARD_NO),
CONSTRAINT FK_A FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
CONSTRAINT FK_C FOREIGN KEY (BRANCH_ID) REFERENCES LIBRARY_BRANCH(BRANCH_ID) ON DELETE CASCADE
);

INSERT INTO PUBLISHER VALUES('PHI', 'PUNE', '908070');
INSERT INTO PUBLISHER VALUES('PEARSON', 'MUMBAI', '8080707060');
INSERT INTO PUBLISHER VALUES('MCGRAWHILL', 'HOUSTIN,USA', '120707070');
INSERT INTO PUBLISHER VALUES('WILEY', 'CALIFORNIA,USA', '1108080808');
INSERT INTO PUBLISHER VALUES('SSI', 'FLORIDA', '1208080909');
INSERT INTO PUBLISHER VALUES('SP', 'BANGALORE,INDIA', '2342228585');

INSERT INTO LIBRARY_BRANCH VALUES('1000', 'SMVIT', 'HUNASEMARANAHALLI');
INSERT INTO LIBRARY_BRANCH VALUES('2000', 'SVIT', 'DODDABALLAPUR');
INSERT INTO LIBRARY_BRANCH VALUES('3000', 'BMSIT', 'AVANAHALLI');
INSERT INTO LIBRARY_BRANCH VALUES('4000', 'SVCE', 'VIDYANAGAR');
INSERT INTO LIBRARY_BRANCH VALUES('5000', 'MSCE', 'CHIKKAJALA');
INSERT INTO LIBRARY_BRANCH VALUES('6000', 'NMIT', 'YELAHANKA');

INSERT INTO BOOK VALUES('1111', 'FUNNDAMENTALS OF DATABASE', 'PHI', 2009);
INSERT INTO BOOK VALUES('2222', 'BASICS OF LOGIC', 'PEARSON', 2009);
INSERT INTO BOOK VALUES('3333', 'DATASTRUCTURES', 'MCGRAWHILL', 2015);
INSERT INTO BOOK VALUES('4444', 'ARTIFICIAL INTELLIGENCE', 'WILEY', 2017);
INSERT INTO BOOK VALUES('5555', 'PROGRAMMING SKILLS', 'SSI', 2014);
INSERT INTO BOOK VALUES('6666', 'DESIGN OF ALGORITHMS', 'SP', 2013);

INSERT INTO BOOK_AUTHORS VALUES('1111', 'NAVATHE');
INSERT INTO BOOK_AUTHORS VALUES('2222', 'GODSE');
INSERT INTO BOOK_AUTHORS VALUES('3333', 'SAHANI');
INSERT INTO BOOK_AUTHORS VALUES('4444', 'RITCHIE');
INSERT INTO BOOK_AUTHORS VALUES('5555', 'KNIGHT');
INSERT INTO BOOK_AUTHORS VALUES('6666', 'COREMEN');

INSERT INTO BOOK_COPIES VALUES('1111', '1000', '5');
INSERT INTO BOOK_COPIES VALUES('2222', '2000', '6');
INSERT INTO BOOK_COPIES VALUES('3333', '3000', '92');
INSERT INTO BOOK_COPIES VALUES('4444', '4000', '49');
INSERT INTO BOOK_COPIES VALUES('5555', '5000', '9');
INSERT INTO BOOK_COPIES VALUES('6666', '6000', '8');
INSERT INTO BOOK_COPIES VALUES('2222', '3000', '7');

INSERT INTO BOOK_LENDING VALUES('1111', '1000', '10', '15-FEB-17', '15-JUN-17');
INSERT INTO BOOK_LENDING VALUES('2222', '2000', '10', '10-MAR-17', '15-AUG-17');
INSERT INTO BOOK_LENDING VALUES('3333', '3000', '10', '15-APR-17', '15-SEP-17');
INSERT INTO BOOK_LENDING VALUES('4444', '4000', '10', '10-JUN-17', '15-NOV-17');
INSERT INTO BOOK_LENDING VALUES('5555', '5000', '20', '15-FEB-17', '15-JUN-17');
INSERT INTO BOOK_LENDING VALUES('6666', '6000', '30', '10-MAR-17', '15-AUG-17');
INSERT INTO BOOK_LENDING VALUES('5555', '5000', '10', '15-JAN-16', '15-JUN-16');

SELECT * FROM PUBLISHER;
SELECT * FROM LIBRARY_BRANCH;
SELECT * FROM BOOK;
SELECT * FROM BOOK_AUTHORS;
SELECT * FROM BOOK_COPIES;
SELECT * FROM BOOK_LENDING;


COMMIT;
